spring:
  application:
    name: nitere-cloud-order

  # 如果你真的要從 Consul K/V 讀遠端配置，可以這樣：
  # config:
  #   import: optional:consul:localhost:8500
  config:
    import: "optional:consul:localhost:8500"

  cloud:
    consul:
      host: localhost
      port: 8500
      discovery:
        service-name: ${spring.application.name}
      config:
        profile-separator: '-'
        format: YAML

    openfeign:
      client:
        config:
          default:
            connectTimeout: 4000
            readTimeout: 4000

      httpclient:
        hc5:
          enabled: true
      compression:
        request:
          enabled: true
          min-request-size: 2048
          mime-types: text/xml,application/xml,application/json
        response:
          enabled: true
      circuitbreaker:
        enabled: true
        group:
          enabled: true

# Resilience4j 詳細策略（可選，但推薦）
resilience4j:
  circuitbreaker:
    instances:
      nitere-cloud-production:
        slidingWindowSize: 20
        minimumNumberOfCalls: 10
        failureRateThreshold: 50
        waitDurationInOpenState: 10s
        permittedNumberOfCallsInHalfOpenState: 3
  timelimiter:
    instances:
      nitere-cloud-production:
        timeoutDuration: 3s

logging:
  level:
    com.nitere.cloud.commons.web.controller.feign.ProductionFeignApi: debug
    org.springframework.cloud.openfeign: DEBUG
    feign: DEBUG
    org.apache.hc.client5.http: DEBUG
